import { NextComponentType } from 'next';
import React from 'react';
import useOnClickOutside from 'hooks/useOnClickOutside'
import CartDropDown from '../CartDropDown/CartDropDown';


const CartBtn: NextComponentType = () => {
  const [active, setActive] = React.useState<boolean>(false);
  const ref = React.useRef<HTMLDivElement>(null);
  useOnClickOutside(ref, () => setActive(false))
  
  return (
    <div ref={ref} className="cartBtn-container">
      <div onClick={() => setActive(!active)} className="cartBtn">
        <div className="cartBtn-icon">
          <div className="cartSize">19</div>
          <svg viewBox="0 0 24 24" role="presentation">
            <path d="M17.708 8.444H15.847L12.813 4.214C12.7762 4.17337 12.7361 4.1359 12.693 4.102C12.6598 4.05958 12.623 4.0201 12.583 3.984C12.573 3.977 12.561 3.976 12.551 3.97C12.4879 3.93235 12.4208 3.90183 12.351 3.879C12.3005 3.85498 12.248 3.83557 12.194 3.821C12.1277 3.81223 12.0607 3.81022 11.994 3.815C11.9325 3.80898 11.8705 3.80898 11.809 3.815C11.753 3.83056 11.6985 3.85097 11.646 3.876C11.5762 3.89807 11.5091 3.92793 11.446 3.965C11.436 3.971 11.424 3.972 11.413 3.979C11.3736 4.01537 11.3371 4.05483 11.304 4.097C11.2609 4.1309 11.2208 4.16837 11.184 4.209L8.153 8.444H6.291C5.71669 8.44506 5.16623 8.67374 4.76022 9.07993C4.35422 9.48612 4.12579 10.0367 4.125 10.611V14.333C4.12659 15.8206 4.71826 17.2469 5.77018 18.2988C6.8221 19.3507 8.24836 19.9424 9.736 19.944H14.264C15.7516 19.9424 17.1779 19.3507 18.2298 18.2988C19.2817 17.2469 19.8734 15.8206 19.875 14.333V10.611C19.8745 10.0364 19.646 9.48556 19.2397 9.07928C18.8334 8.67301 18.2826 8.44453 17.708 8.444ZM12 6.513L13.386 8.444H10.615L12 6.513ZM17.875 14.333C17.8739 15.2904 17.4932 16.2082 16.8162 16.8852C16.1392 17.5622 15.2214 17.9429 14.264 17.944H9.736C8.77863 17.9429 7.86077 17.5622 7.18381 16.8852C6.50684 16.2082 6.12606 15.2904 6.125 14.333V10.611C6.12526 10.567 6.1428 10.5248 6.17385 10.4936C6.20489 10.4623 6.24696 10.4445 6.291 10.444H17.708C17.7522 10.4443 17.7945 10.4619 17.8258 10.4932C17.8571 10.5245 17.8747 10.5668 17.875 10.611V14.333ZM13.222 13.45C13.2423 13.5318 13.2524 13.6157 13.252 13.7C13.2521 13.8652 13.218 14.0286 13.152 14.18C13.0923 14.3317 12.9997 14.4683 12.881 14.58C12.7658 14.699 12.6258 14.7912 12.471 14.85C12.3236 14.9176 12.1631 14.9517 12.001 14.95C11.8359 14.9527 11.6722 14.9186 11.522 14.85C11.3684 14.7888 11.2289 14.6969 11.112 14.58C10.9961 14.4659 10.904 14.3299 10.841 14.18C10.7828 14.0266 10.7524 13.8641 10.751 13.7C10.7525 13.6163 10.7595 13.5328 10.772 13.45C10.7904 13.372 10.8134 13.2952 10.841 13.22C10.8716 13.1419 10.9119 13.068 10.961 13C11.008 12.9341 11.0584 12.8707 11.112 12.81C11.3531 12.5881 11.6688 12.4649 11.9965 12.4649C12.3242 12.4649 12.6399 12.5881 12.881 12.81C12.938 12.8701 12.9915 12.9336 13.041 13C13.0841 13.0701 13.1213 13.1437 13.152 13.22C13.1844 13.2936 13.2079 13.3708 13.222 13.45Z"></path>
          </svg>
        </div>
        <span>Корзина</span>
      </div>
      <CartDropDown active={active} setActive={setActive} />
    </div>
  );
};

export default CartBtn;
