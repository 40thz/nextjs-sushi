import React from 'react'
import cn from 'classnames'

import useOnClickOutside from 'hooks/useOnClickOutside'
import { NextComponentType } from 'next'

const CitySelector: NextComponentType = () => {
	const citySelectorRef = React.useRef<HTMLDivElement>(null)
	const [dropActive, setDropActive] = React.useState<boolean>(false)

	useOnClickOutside(citySelectorRef, () => setDropActive(false))

	return (
		<div
			ref={citySelectorRef}
			onClick={() => setDropActive(!dropActive)}
			className='citySelector'
		>
			<div className={cn('citySelector-current', { active: dropActive })}>
				<div className='citySelector-current-icon'>
					<svg viewBox='0 0 24 24' role='presentation'>
						<path d='M19.306 9.528C19.306 9.79322 19.2006 10.0476 19.0131 10.2351C18.8255 10.4226 18.5712 10.528 18.306 10.528C18.0407 10.528 17.7864 10.4226 17.5989 10.2351C17.4113 10.0476 17.306 9.79322 17.306 9.528C17.3156 8.82514 17.1855 8.12737 16.9232 7.47522C16.6609 6.82307 16.2717 6.22954 15.778 5.72909C15.2844 5.22865 14.6963 4.83128 14.0478 4.56005C13.3993 4.28883 12.7034 4.14916 12.0005 4.14916C11.2975 4.14916 10.6016 4.28883 9.95313 4.56005C9.30464 4.83128 8.71651 5.22865 8.22289 5.72909C7.72927 6.22954 7.34001 6.82307 7.07771 7.47522C6.81542 8.12737 6.68531 8.82514 6.69496 9.528C6.69496 12.274 10.649 18.595 12.033 20.1C13.7781 17.9986 15.2069 15.6535 16.274 13.139C16.3265 13.0186 16.4022 12.9097 16.4968 12.8185C16.5915 12.7274 16.7031 12.6557 16.8254 12.6077C16.9477 12.5597 17.0782 12.5363 17.2096 12.5387C17.341 12.5412 17.4705 12.5695 17.591 12.622C17.7114 12.6745 17.8203 12.7503 17.9114 12.8449C18.0026 12.9395 18.0742 13.0511 18.1222 13.1734C18.1702 13.2957 18.1937 13.4263 18.1912 13.5576C18.1888 13.689 18.1605 13.8186 18.108 13.939C17.508 15.313 14.051 22.295 12 22.295C10.069 22.295 4.69996 12.871 4.69996 9.531C4.68865 8.56444 4.86926 7.60524 5.23133 6.70897C5.59339 5.81271 6.12971 4.99721 6.80921 4.30971C7.48871 3.62222 8.29788 3.07639 9.18985 2.70387C10.0818 2.33135 11.0388 2.13953 12.0055 2.13953C12.9721 2.13953 13.9291 2.33135 14.8211 2.70387C15.713 3.07639 16.5222 3.62222 17.2017 4.30971C17.8812 4.99721 18.4175 5.81271 18.7796 6.70897C19.1417 7.60524 19.3223 8.56444 19.311 9.531L19.306 9.528ZM12 6.875C12.6697 6.8748 13.3244 7.07322 13.8814 7.44516C14.4384 7.8171 14.8725 8.34585 15.1289 8.96454C15.3854 9.58323 15.4526 10.2641 15.322 10.921C15.1915 11.5778 14.8691 12.1813 14.3956 12.6549C13.9221 13.1286 13.3188 13.4511 12.6619 13.5819C12.0051 13.7126 11.3242 13.6456 10.7054 13.3894C10.0867 13.1331 9.55778 12.6991 9.18568 12.1423C8.81357 11.5854 8.61496 10.9307 8.61496 10.261C8.61576 9.36339 8.97261 8.50276 9.60722 7.86797C10.2418 7.23317 11.1024 6.87606 12 6.875ZM12 8.875C11.7258 8.8748 11.4577 8.95592 11.2297 9.1081C11.0016 9.26027 10.8238 9.47667 10.7188 9.72991C10.6137 9.98315 10.5861 10.2619 10.6395 10.5308C10.6928 10.7997 10.8248 11.0468 11.0186 11.2407C11.2124 11.4346 11.4593 11.5667 11.7282 11.6203C11.9971 11.6739 12.2758 11.6465 12.5291 11.5416C12.7824 11.4367 12.999 11.2591 13.1513 11.0311C13.3036 10.8032 13.385 10.5352 13.385 10.261C13.3844 9.89374 13.2384 9.54167 12.9788 9.28189C12.7192 9.0221 12.3672 8.87579 12 8.875Z'></path>
					</svg>
				</div>
				<div className='citySelector-current-city'>Красноярск</div>
			</div>
			{dropActive && (
				<div className='citySelector-dropdown'>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
					<a href='#'>Абакан</a>
				</div>
			)}
		</div>
	)
}

export default CitySelector
